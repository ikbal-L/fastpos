<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:PosTest.ViewModels"
                    xmlns:src="clr-namespace:ServiceInterface.Model;assembly=ServiceInterface" 
                    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                    xmlns:cal="http://www.caliburnproject.org" >

    <BooleanToVisibilityConverter x:Key="BoolToVisibility" />

    <DataTemplate DataType="{x:Type src:Product}" >
        <StackPanel  Orientation="Vertical" x:Name="ProductTemplate">
            <!--cal:Message.Attach="[Event Click] = [Action AddOrderItem($this)]"-->
            <Button x:Name="ProductClick"  >
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="Click">
                        <cal:ActionMessage MethodName="AddOrderItem">
                            <cal:Parameter Value="{Binding ElementName=ProductTemplate, Path=DataContext}" />
                        </cal:ActionMessage>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <DockPanel Height="80" Width="100" Background="{Binding Background}" >
                    <!--cal:Message.Attach="[Event MouseLeftButtonUp] = [Action AddOrderItem($this)]"-->
                    <Border DockPanel.Dock="Top" 
                            Height="40"  >
                        <TextBlock Text="{Binding Path=Name}"   FontSize="12"  TextWrapping="Wrap" TextAlignment="Center" 
                                   VerticalAlignment="Center" TextTrimming="WordEllipsis" FontWeight="Bold"/>
                    </Border>
                    <Border  DockPanel.Dock="Bottom">
                        <TextBlock Text="{Binding Path=Price, StringFormat='Price: {0} DA'}" FontSize="12" 
                               TextAlignment="Center" VerticalAlignment="Center"  TextTrimming="WordEllipsis" />
                    </Border>
                </DockPanel>
                
            </Button>
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type local:CategoryItem}">
        <ListBox Grid.Row="0" BorderThickness="0" 
                  Background="#4CFFFFFF"  
                 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                 ItemsSource="{Binding Products}"
                 Margin="2"
                 ScrollViewer.VerticalScrollBarVisibility="Disabled">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="2"/>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>
    </DataTemplate>
</ResourceDictionary>